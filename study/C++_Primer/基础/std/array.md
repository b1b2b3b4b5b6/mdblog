<!--
author: lumos
date: 2026-01-30
title:  
tags: 
category: 
status: draft
summary: 
-->


# 标准库类型array
```cpp
#include <array>
using std::array;
```
- 定长顺序容器，元素连续存储
- 大小在编译期固定，类型为`array<T, N>`
- 支持随机访问，开销与内置数组接近

##### 初始化方式
| 方式                          | 说明                                 |
| :---------------------------- | :---------------------------------- |
| array<T, N> a1                | 默认初始化（元素类型决定是否有默认值） |
| array<T, N> a2{}              | 值初始化，全部元素为零值/空值          |
| array<T, N> a3 = {a,b,c}      | 用列表初始化，未写满的元素值初始化      |
| array<T, N> a4{{a,b,c}}       | 列表初始化（避免与旧标准歧义）         |
| array<T, N> a5 = a3           | 拷贝全部元素                          |

##### 对array的写入操作
| 方式                | 说明                         |
| :----------------- | :-------------------------- |
| a.fill(val)        | 用val填充所有元素             |
| a.swap(a2)         | 交换两个array的内容            |
| a[i] = val         | 修改第i个元素                  |
| a.at(i) = val      | 带边界检查的修改               |

> array大小固定，不支持`push_back`/`insert`/`erase`

##### 对array的读取操作
| 方式            | 说明                                                      |
| :-------------- | :-------------------------------------------------------- |
| a.empty()       | 如果N为0返回真，否则返回假                                |
| a.size()        | 返回元素个数，等于N                                        |
| a.max_size()    | 返回最大元素个数，等于N                                    |
| a[n]            | 返回第n个元素的引用，从0计                                 |
| a.at(n)         | 返回第n个元素的引用，带边界检查                            |
| a.front()       | 返回首元素的引用                                           |
| a.back()        | 返回尾元素的引用                                           |
| a.data()        | 返回指向底层连续存储的指针                                 |
| a1 == a2        | 元素完全相同且位置一致时返回真                              |
| a1 != a2        | 元素完全相同且位置一致时返回假，否则返回真                   |
| <, <=, >, >=    | 由第一对相异的元素值的大小决定（位置对应，长度相同时比较） |

>注：只有在T可比较的情况下，array<T, N>才可比较

##### 迭代器本质
- `array<T, N>::iterator`本质为指针（连续内存上的T*）
- `const_iterator`为`const T*`

##### range-for迭代
拷贝方式，不可赋值
```cpp
for(auto i : a)
	cout << i << endl;
```
引用方式，可赋值
```cpp
for(auto &i : a)
	cout << i << endl;
```

##### 使用示例
```cpp
array<int, 4> a = {1, 2, 3}; // 第4个元素值初始化为0

a[0] = 10;
a.at(1) = 20;

cout << a.front() << endl; // 10
cout << a.back() << endl;  // 0

int *p = a.data();
cout << p[2] << endl;      // 3

array<int, 4> b{};
b.fill(7);                 // {7,7,7,7}

a.swap(b);
```

##### array vs vector
| 特性          | array                       | vector                    |
| :----------- | :-------------------------- | :------------------------ |
| 大小          | 编译期固定                   | 运行期可变                 |
| 内存布局      | 连续                         | 连续                       |
| 访问性能      | 最快                         | 很快                       |
| 迭代器失效    | 赋值/交换不失效               | 扩容/插入可能失效           |
| 适用场景      | 固定大小、栈上分配            | 动态大小、可扩容            |
