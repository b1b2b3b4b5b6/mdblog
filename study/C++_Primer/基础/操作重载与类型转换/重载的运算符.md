# 重载的运算符

## 性质
格式一览
```cpp
int operator+(FooClass, FooClass);
```

* 由关键`operator`和其后要定义的**运算符号**共同组成，同时也包含**返回类型**，**参数列表**以及**函数体**
* 参数数量与运算符作用的运算对象数量一样多
* 作为成员函数时，this绑定到左侧运算对象，参数数量显示的少一个
* 类的成员和含有一个类类型的参数（非成员函数）**二选一**
* 当运算符的重载版本无法保留以下属性时，不建议重载
    * 求值顺序
    * 短路求值
* 赋值`=`,下标`[]`,调用`()`,成员访问箭头`->`必须是成员
* 如果同时定义了`+`和`+=`,则一般用`+=`实现`+`,其余同理

### 直接调用
```cpp
//成员函数
data1 += data2;
data1.operator+=(data2);

//非成员函数
data1 + data2;
operator+(data1, data2)
```

### 下标运算符
如果定义一个下标运算符`[]`,则一般要定义两个版本

* 返回普通引用
* 作为类的的常量成员并返回常量引用(应对常量对象)


### 递增和递减运算符
* 递增和递减预算符应同时定义前置版本和后置版本
    * 前置运算符应返回递增或递减后对象的引用
    * 后置运算符应返回对象的原值
* 如何区分前置和后置运算符，如下

```cpp
Foo operator++(int);    //后置运算符
Foo& operator++();      //前置运算符
```
如果要显示调用后置版本,则必须为整数形参传递值

```cpp
Foo my;
my.operator++(0)  //必须赋数值
```

### 箭头运算符和解引用运算符
* 箭头运算符必须是类的成员
* 重载的箭头运算符必须返回类的指针或者自定义了箭头运算符的某个类的对象
* 重载的箭头运算符会一直调用下去,直到箭头前是一个指针,然后引用内置的箭头运算符


