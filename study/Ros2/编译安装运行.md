# 编译安装运行

## 要求
ros2的工作空间有统一要求，如下如下
![](https://raw.githubusercontent.com/b1b2b3b4b5b6/pic/main/PicGo/202511121500237.png)
- `src` 用户创建的源码目录, 里面是各个节点工程文件夹
- `build, log, install` 使用colcon build产生, 不需要自己创建

## 安装依赖
使用rosdep
### 初始化rosdep
第一次在此机器上使用时只做一次
```bash
sudo rosdep init
rosdep update
```
- `rosdep init` 需要 root 权限，只做一次（会在 sources.list.d 写入源）
- `rosdep update` 会下载 rosdep 数据库到 ~/.ros/rosdep/sources.cache
- 
### 检查安装依赖包
在工作目录执行
```bash
sudo rosdep install --from-paths src --ignore-src -r -y
```
- `--from-paths src` 从 src/ 下查找 package.xml。
- `--ignore-src` 忽略工作区内源码包（只安装系统依赖），这是关键，防止 rosdep 尝试安装本地包。
- `-r / --reinstall` 遇到已安装的会尝试满足依赖，不一定必须。
- `-y` 自动确认安装（非交互）。

## 编译
在`工作目录`(src所在目录)下执行
```bash
colcon build
```
将会编译工作空间所有节点代码

## 安装
安装的目的是导出编译节点到环境, 对ros2指令`可见`
在编译后执行
```bash
source install/setup.bash
```
将会安装所有编译节点

## 运行
有两种方法运行节点
- `ros2 run <package_name> <executable_name>`
- `ros2 launch <package_name> <launch_file.launch.py> [args...]`
launch方式更简洁, 可以将需要参数, 启动行为写到launch.py中